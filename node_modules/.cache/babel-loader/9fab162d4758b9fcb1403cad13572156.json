{"ast":null,"code":"import _createForOfIteratorHelper from\"/home/user/projects/node/live_03/quickstart-react/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";import _regeneratorRuntime from\"/home/user/projects/node/live_03/quickstart-react/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/user/projects/node/live_03/quickstart-react/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/user/projects/node/live_03/quickstart-react/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from\"react\";import{useState,useEffect}from\"react\";import\"./App.css\";import mondaySdk from\"monday-sdk-js\";import\"monday-ui-react-core/dist/main.css\";//Explore more Monday React Components here: https://style.monday.com/\nimport{Dropdown,Button,AttentionBox}from\"monday-ui-react-core\";import{ThumbsUp,Alert}from\"monday-ui-react-core/icons\";// Usage of mondaySDK example, for more information visit here: https://developer.monday.com/apps/docs/introduction-to-the-sdk/\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var monday=mondaySdk();var Popup=function Popup(props){function mockOnClose(){props.hideMessage();};var iconType=Alert;if(props.popupIcon===\"ThumbsUp\")iconType=ThumbsUp;return props.showMessage&&/*#__PURE__*/_jsx(AttentionBox,{className:\"monday-storybook-attention-box_box\",text:props.message,title:props.title,type:props.popupType,onClose:mockOnClose,icon:iconType});};var App=function App(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),allOptionsAttorneys=_useState2[0],setAttorneysOptions=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),allOptionsParalegals=_useState4[0],setParalegalsOptions=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),selectedAttorney=_useState6[0],setSelectedAttorney=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),selectedParalegal=_useState8[0],setSelectedParalegal=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),selectedItemId=_useState10[0],setSelectedItemId=_useState10[1];var _useState11=useState(\"\"),_useState12=_slicedToArray(_useState11,2),popupTitle=_useState12[0],setPopupTitle=_useState12[1];var _useState13=useState(\"\"),_useState14=_slicedToArray(_useState13,2),popupMessage=_useState14[0],setPopupMessage=_useState14[1];var _useState15=useState(),_useState16=_slicedToArray(_useState15,2),popupIcon=_useState16[0],setPopupIcon=_useState16[1];var _useState17=useState(),_useState18=_slicedToArray(_useState17,2),popupType=_useState18[0],setPopupType=_useState18[1];var _useState19=useState(false),_useState20=_slicedToArray(_useState19,2),showMessage=_useState20[0],setShowMessage=_useState20[1];useEffect(function(){// Notice this method notifies the monday platform that user gains a first value in an app.\n// Read more about it here: https://developer.monday.com/apps/docs/mondayexecute#value-created-for-user/\n//monday.execute(\"valueCreatedForUser\");\n// TODO: set up event listeners, Here`s an example, read more here: https://developer.monday.com/apps/docs/mondaylisten/\nmonday.listen(\"context\",function(res){if(res.data&&res.data.itemIds&&res.data.itemIds.length>0){setSelectedItemId(res.data.itemIds[0]);console.log(res.data.itemIds[0]);}else console.log(res.data);});},[]);function createSubtasks(){if(selectedAttorney&&selectedParalegal&&selectedItemId){var url='https://hooks.zapier.com/hooks/catch/3411101/3bi5klk/';var data={selectedAttorney:selectedAttorney,selectedParalegal:selectedParalegal,selectedItemId:selectedItemId};console.log(\"Sending ->\"+JSON.stringify(data));_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response,body;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return fetch(url,{method:\"POST\",body:JSON.stringify(data)});case 3:response=_context.sent;_context.next=6;return response.text();case 6:body=_context.sent;console.log(body);setPopupTitle(\"Create Subtasks\");setPopupMessage(\"Finished creating subtasks!\");setPopupIcon(\"ThumbsUp\");setPopupType(AttentionBox.types.SUCCESS);setShowMessage(true);_context.next=23;break;case 15:_context.prev=15;_context.t0=_context[\"catch\"](0);console.error(_context.t0);setPopupTitle(\"Create Subtasks\");setPopupMessage(\"Error creating subtasks. \"+_context.t0.message);setPopupIcon(\"Alert\");setPopupType(AttentionBox.types.DANGER);setShowMessage(true);case 23:case\"end\":return _context.stop();}}},_callee,null,[[0,15]]);}))();}}function attorneyChanged(item){setSelectedAttorney(item.value);}function paralegalChanged(item){setSelectedParalegal(item.value);}function hideMessage(){setShowMessage(false);}monday.api(\"\\n  query {\\n    teams {\\n        name,\\n        users {\\n            name\\n        }\\n    }\\n}\\n  \").then(function(res){var newOptionsAttorneys=[];var newOptionsParalegals=[];var _iterator=_createForOfIteratorHelper(res.data.teams),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var team=_step.value;if(team.name.toString().trim().toLowerCase()===\"attorneys\"){var _iterator2=_createForOfIteratorHelper(team.users),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var user=_step2.value;newOptionsAttorneys.push({value:user.name,label:user.name});}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}}else if(team.name.toString().trim().toLowerCase()===\"paralegals\"){var _iterator3=_createForOfIteratorHelper(team.users),_step3;try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var _user=_step3.value;newOptionsParalegals.push({value:_user.name,label:_user.name});}}catch(err){_iterator3.e(err);}finally{_iterator3.f();}}}}catch(err){_iterator.e(err);}finally{_iterator.f();}setAttorneysOptions(newOptionsAttorneys);setParalegalsOptions(newOptionsParalegals);});return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Dropdown,{onChange:attorneyChanged,placeholder:\"Please Select an Attorney\",options:allOptionsAttorneys,className:\"dropdown-select-member\"})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Dropdown,{onChange:paralegalChanged,placeholder:\"Please Select a Paralegal\",options:allOptionsParalegals,className:\"dropdown-select-member\"})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Button,{className:\"create-subtasks\",onClick:createSubtasks,children:\"Generate Tasks\"})}),/*#__PURE__*/_jsx(Popup,{title:popupTitle,message:popupMessage,popupType:popupType,popupIcon:popupIcon,showMessage:showMessage,hideMessage:hideMessage})]});};export default App;","map":{"version":3,"names":["React","useState","useEffect","mondaySdk","Dropdown","Button","AttentionBox","ThumbsUp","Alert","monday","Popup","props","mockOnClose","hideMessage","iconType","popupIcon","showMessage","message","title","popupType","App","allOptionsAttorneys","setAttorneysOptions","allOptionsParalegals","setParalegalsOptions","selectedAttorney","setSelectedAttorney","selectedParalegal","setSelectedParalegal","selectedItemId","setSelectedItemId","popupTitle","setPopupTitle","popupMessage","setPopupMessage","setPopupIcon","setPopupType","setShowMessage","listen","res","data","itemIds","length","console","log","createSubtasks","url","JSON","stringify","fetch","method","body","response","text","types","SUCCESS","error","DANGER","attorneyChanged","item","value","paralegalChanged","api","then","newOptionsAttorneys","newOptionsParalegals","teams","team","name","toString","trim","toLowerCase","users","user","push","label"],"sources":["/home/user/projects/node/live_03/quickstart-react/src/App.js"],"sourcesContent":["import React from \"react\";\nimport { useState, useEffect } from \"react\";\nimport \"./App.css\";\nimport mondaySdk from \"monday-sdk-js\";\nimport \"monday-ui-react-core/dist/main.css\";\n\n\n\n//Explore more Monday React Components here: https://style.monday.com/\nimport { Dropdown, Button, AttentionBox } from \"monday-ui-react-core\";\nimport { ThumbsUp, Alert } from \"monday-ui-react-core/icons\";\n\n// Usage of mondaySDK example, for more information visit here: https://developer.monday.com/apps/docs/introduction-to-the-sdk/\nconst monday = mondaySdk();\nconst Popup = (props) => {  \n  function mockOnClose() {\n    props.hideMessage();\n  };\n\n  let iconType = Alert;\n  if (props.popupIcon === \"ThumbsUp\")\n    iconType = ThumbsUp;\n  return (\n    props.showMessage &&\n      <AttentionBox\n        className=\"monday-storybook-attention-box_box\"\n        text={props.message}\n        title={props.title}\n        type={props.popupType}\n        onClose={mockOnClose}\n        icon={iconType}\n      />\n  );\n}\n\nconst App = () => {\n  const [allOptionsAttorneys, setAttorneysOptions] = useState([]);\n  const [allOptionsParalegals, setParalegalsOptions] = useState([]);\n  const [selectedAttorney, setSelectedAttorney] = useState(\"\");\n  const [selectedParalegal, setSelectedParalegal] = useState(\"\");\n  const [selectedItemId, setSelectedItemId] = useState(\"\");\n  const [popupTitle, setPopupTitle] = useState(\"\");\n  const [popupMessage, setPopupMessage] = useState(\"\");\n  const [popupIcon, setPopupIcon] = useState();\n  const [popupType, setPopupType] = useState();\n  const [showMessage, setShowMessage] = useState(false);\n\n  \n  \n  useEffect(() => {\n    // Notice this method notifies the monday platform that user gains a first value in an app.\n    // Read more about it here: https://developer.monday.com/apps/docs/mondayexecute#value-created-for-user/\n    //monday.execute(\"valueCreatedForUser\");\n\n    // TODO: set up event listeners, Here`s an example, read more here: https://developer.monday.com/apps/docs/mondaylisten/\n    monday.listen(\"context\", (res) => {\n      if (res.data && res.data.itemIds && res.data.itemIds.length > 0){\n        setSelectedItemId(res.data.itemIds[0]);\n        console.log(res.data.itemIds[0]);\n      }\n      else\n        console.log(res.data);\n    });\n  }, []);\n\n  function createSubtasks(){\n    if (selectedAttorney && selectedParalegal && selectedItemId){\n      const url = 'https://hooks.zapier.com/hooks/catch/3411101/3bi5klk/';\n      const data = {\n        selectedAttorney: selectedAttorney,\n        selectedParalegal: selectedParalegal,\n        selectedItemId: selectedItemId\n      };\n      console.log(\"Sending ->\" + JSON.stringify(data));\n      \n      (async () => {\n        try {\n            const response = await fetch(url, {\n              method: \"POST\",\n              body: JSON.stringify(data)\n            });\n            const body = await response.text();\n            console.log(body);\n            setPopupTitle(\"Create Subtasks\");\n            setPopupMessage(\"Finished creating subtasks!\");\n            setPopupIcon(\"ThumbsUp\");\n            setPopupType(AttentionBox.types.SUCCESS);\n            setShowMessage(true);\n        } catch (error) {\n            console.error(error);\n            setPopupTitle(\"Create Subtasks\");\n            setPopupMessage(\"Error creating subtasks. \" + error.message);\n            setPopupIcon(\"Alert\");\n            setPopupType(AttentionBox.types.DANGER);\n            setShowMessage(true);\n        }\n      })();      \n    }      \n  }\n\n  function attorneyChanged(item){\n    setSelectedAttorney(item.value);\n  }\n\n  function paralegalChanged(item){\n    setSelectedParalegal(item.value);\n  }\n\n  function hideMessage(){\n    setShowMessage(false);\n  }\n\n  monday.api(`\n  query {\n    teams {\n        name,\n        users {\n            name\n        }\n    }\n}\n  `).then(res => {\n    let newOptionsAttorneys = [];\n    let newOptionsParalegals = [];\n    for (let team of res.data.teams){\n      if (team.name.toString().trim().toLowerCase() === \"attorneys\"){\n        for (let user of team.users){\n          newOptionsAttorneys.push({value: user.name, label: user.name});\n        }\n      }\n      else if (team.name.toString().trim().toLowerCase() === \"paralegals\"){\n        for (let user of team.users){\n          newOptionsParalegals.push({value: user.name, label: user.name});\n        }\n      }\n    }\n    setAttorneysOptions(newOptionsAttorneys);\n    setParalegalsOptions(newOptionsParalegals);\n  });\n\n  return (\n    <div className=\"App\">\n      <div>\n        <Dropdown onChange={attorneyChanged} placeholder=\"Please Select an Attorney\" options={allOptionsAttorneys} className=\"dropdown-select-member\" />\n      </div>\n      <div>\n        <Dropdown onChange={paralegalChanged} placeholder=\"Please Select a Paralegal\" options={allOptionsParalegals} className=\"dropdown-select-member\" />\n      </div>      \n      <div>\n        <Button className=\"create-subtasks\" onClick={createSubtasks}>Generate Tasks</Button>\n      </div>\n      <Popup title={popupTitle} message={popupMessage} popupType={popupType} popupIcon={popupIcon} showMessage={showMessage} hideMessage={hideMessage}></Popup>\n    </div>\n  );\n};\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}